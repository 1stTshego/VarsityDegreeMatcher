

const WitsData = {
  "University of Witwatersrand (Wits)": [
    {
      "degree": "BCom Accounting",
      "requirements": {
        "APS": 38,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5
      }
    },
    {
      "degree": "Accounting Science",
      "requirements": {
        "APS": 44,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 6
      }
    },
    {
      "degree": "Actuarial Science",
      "requirements": {
        "APS": 42,
        "English Home Language": 7,
        "English First Additional Language": 7,
        "Mathematics": 7,
        "Physical Science": 7
      }
    },
    {
      "degree": "Aeronautical Engineering",
      "requirements": {
        "APS": 42,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5,
        "Physical Sciences": 5
      }
    },
    {
      "degree": "Applied Bioinformatics",
      "requirements": {
        "APS": 43,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5
      }
    },
    {
      "degree": "Applied Chemistry",
      "requirements": {
        "APS": 42,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 6,
        "Physical Science": 5
      }
    },
    {
      "degree": "Architectural Studies",
      "requirements": {
        "APS": 29,
        "English Home Language": 4,
        "English First Additional Language": 4,
        "Mathematics": 4,
        "Afrikaans Eerste Additionlele Taal" : 4,   
        

      }
    },
    {
      "degree": "Astronomy and Astrophysics",
      "requirements": {
        "APS": 43,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 6,
        "Physical Science": 6
      }
    },
    {
      "degree": "Audiology",
      "requirements": {
        "APS": 34,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 4
      }
    },
    {
      "degree": "Bachelor of Arts (General BA)",
      "requirements": {
        "APS": 36,
        "English Home Language": 5,
        "English First Additional Language": 5
      }
    },
    {
      "degree": "Bachelor of Commerce (General)",
      "requirements": {
        "APS": 38,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5
      }
    },
    {
      "degree": "Bachelor of Engineering Science in Digital Arts",
      "requirements": {
        "APS": 42,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5,
        "Physical Sciences": 5
      }
    },
    {
      "degree": "Bachelor of Laws (LLB) - Four-year stream (LFA14)",
      "requirements": {
        "APS": 46,
        "English Home Language": 6,
        "English First Additional Language": 6,
        "Mathematics": 4,
        "Maths Literacy": 6
      }
    },
    {
      "degree": "Bachelor of Music",
      "requirements": {
        "APS": 34,
        "English Home Language": 5,
        "English First Additional Language": 5
      }
    },
    {
      "degree": "Bachelor of Science (BSc) - BSc General",
      "requirements": {
        "APS": 42,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5
      }
    },
    {
      "degree": "Bachelor of Science in Construction Studies",
      "requirements": {
        "APS": 36,
        "English Home Language": 4,
        "English First Additional Language": 4,
        "Mathematics": 4
      }
    },
    {
      "degree": "Bachelor of Science in Urban and Regional Planning",
      "requirements": {
        "APS": 36,
        "English Home Language": 4,
        "English First Additional Language": 4,
        "Mathematics": 4
      }
    },
    {
      "degree": "Biochemistry and Cell Biology",
      "requirements": {
        "APS": 43,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5
      }
    },
    {
      "degree": "Biodiversity",
      "requirements": {
        "APS": 43,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5
      }
    },
    {
      "degree": "Biokinetics",
      "requirements": {
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5,
        "Life Sciences": 5,
        "Physical Sciences": 5
      }
    },
    {
      "degree": "Biological Sciences (Organismal Biology)",
      "requirements": {
        "APS": 43,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5
      }
    },
    {
      "degree": "Biomedical Engineering",
      "requirements": {
        "APS": 42,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5,
        "Physical Sciences": 5
      }
    },
    {
      "degree": "Biomedical Sciences",
      "requirements": {
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5,
        "Life Sciences": 5,
        "Physical Sciences": 5
      }
    },
    {
      "degree": "Chemical Engineering",
      "requirements": {
        "APS": 42,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5,
        "Physical Sciences": 5
      }
    },
    {
      "degree": "Chemistry",
      "requirements": {
        "APS": 42,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 6,
        "Physical Science": 5
      }
    },
    {
      "degree": "Chemistry with Chemical Engineering",
      "requirements": {
        "APS": 43,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 6,
        "Physical Science": 6
      }
    },
    {
      "degree": "Bachelor of Education in Intermediate Phase Teaching",
      "requirements": {
        "APS": 37,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 4,
        "Maths Literacy": 5,
        "Technical Mathematics": 5
      }
    },
    {
      "degree": "Bachelor of Education in Senior Phase and Further Education and Training",
      "requirements": {
        "APS": 37,
        "English Home Language": 5,
        "English First Additional Language": 5
      }
    },
    {
      "degree": "Bachelor of Education: Foundation Phase Teaching",
      "requirements": {
        "APS": 37,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 4,
        "Maths Literacy": 5,
        "Technical Mathematics": 5
      }
    },
    {
      "degree": "Speech-Language Pathology",
      "requirements": {
        "APS": 34,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 4
      }
    },
    {
      "degree": "Social Work",
      "requirements": {
        "APS": 34,
        "English Home Language": 5,
        "English First Additional Language": 5
      }
    },
    {
      "degree": "Property Studies",
      "requirements": {
        "APS": 36,
        "English Home Language": 4,
        "English First Additional Language": 4,
        "Mathematics": 4
      }
    },
    {
      "degree": "Politics, Philosophy and Economics (PPE)",
      "requirements": {
        "APS": 38,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5
      }
    },
    {
      "degree": "Physiotherapy",
      "requirements": {
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5,
        "Life Sciences": 5,
        "Physical Sciences": 5
      }
    },
    {
      "degree": "Physics",
      "requirements": {
        "APS": 42,
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 6,
        "Physical Science": 5
      }
    },
    {
      "degree": "Pharmacy",
      "requirements": {
        "English Home Language": 5,
        "English First Additional Language": 5,
        "Mathematics": 5,
        "Life Sciences": 5,
        "Physical Sciences": 5
      },
      "URL": "https://www.wits.ac.za/course-finder/undergraduate/health/pharmacy/",
      "Requirements": "APS 42+"
    },
    {
      "degree": "Oral Health Sciences",
      "requirements": {
        "English Home Language": 4,
        "English First Additional Language": 4,
        "Mathematics": 4,
        "Maths Literacy": 7,
        "Life Sciences": 4,
        "Physical Sciences": 4
      },
      "URL": "https://www.wits.ac.za/course-finder/undergraduate/health/oral-health-sciences/"
    },
    {
      "degree": "Occupational Therapy",
      "requirements": {
        "English Home Language": 4,
        "English First Additional Language": 4,
        "Mathematics": 4,
        "Life Sciences": 4,
        "Physical Sciences": 4
      },
      "URL": "https://www.wits.ac.za/course-finder/undergraduate/health/occupational-therapy/"
    }
  ]
};



// Function to add a subject
function addSubject() {
    if (subjectCounter >= 6) {
        alert("You can only select up to 6 subjects.");
        return;
    }
    subjectCounter++;
    
    const subjectContainer = document.createElement("div");
    subjectContainer.classList.add("subject-wrapper");

    const subjectDiv = document.createElement("div");
    subjectDiv.classList.add("subject-container");

    const select = document.createElement("select");
    select.classList.add("subject");
    select.id = "subjects" + subjectCounter;
    const option = document.createElement("option");
    option.value = "";
    option.textContent = "Select a subject";
    select.appendChild(option);
    const subjects = ["Economics", "Physical Sciences", "Life Sciences", "Agricultural Sciences", "Business Studies", "Accounting", "History", "Geography", "Religious Studies", "English Home Language", "English First Additional Language", "Afrikaans Huistaal", "Afrikaans Eerste Additionele Taal", "Sesotho Home Language", "Siswati Home Language", "Setswana Home Language", "isiZulu Home Language", "isiXhosa Home Language", "isiNdebele Home Language", "Sepedi Home Language", "Xitsonga Home Language", "Tshivenda Home Language", "Mathematics", "Mathematical Literacy", "Life Orientation"];

    subjects.forEach(function(subject) {
        const option = document.createElement("option");
        option.value = subject;
        option.textContent = subject;
        select.appendChild(option);
    });

select.value = "Mathematics "; 
    subjectDiv.appendChild(select);

    const input = document.createElement("input");
    input.type = "number";
    input.classList.add("percentage-input");
    input.id = "percentage" + subjectCounter;
    input.min = "0";
    input.max = "100";
    input.placeholder = "%";
    input.style.width = "50px";

     input.value = "75";

    subjectDiv.appendChild(input);

    const deleteButton = document.createElement("button");
    deleteButton.classList.add("delete-button");
    deleteButton.textContent = "Delete";
    deleteButton.onclick = function() { deleteSubject(this); };
    subjectDiv.appendChild(deleteButton);

    subjectContainer.appendChild(subjectDiv);
    document.getElementById("subject-container").appendChild(subjectContainer);
}

// Function to delete a subject
function deleteSubject(button) {
    const subjectContainer = button.parentNode.parentNode;
    subjectContainer.remove();
    subjectCounter--;
}



subjectCounter = 0;

// Function to display eligible degrees based on user inputs
//let subjectCounter = 1;

// Function to add a subject
function addSubject() {
    if (subjectCounter >= 6) {
        alert("You can only select up to 6 subjects.");
        return;
    }
    subjectCounter++;
    
    const subjectContainer = document.createElement("div");
    subjectContainer.classList.add("subject-wrapper");

    const subjectDiv = document.createElement("div");
    subjectDiv.classList.add("subject-container");

    const select = document.createElement("select");
    select.classList.add("subject");
    select.id = "subjects" + subjectCounter;
    const option = document.createElement("option");
    option.value = "";
    option.textContent = "Select a subject";
    select.appendChild(option);
    const subjects = ["Economics", "Physical Sciences", "Life Sciences", "Agricultural Sciences", "Business Studies", "Accounting", "History", "Geography", "Religious Studies", "English Home Language", "English First Additional Language", "Afrikaans Huistaal", "Afrikaans Eerste Additionele Taal", "Sesotho Home Language", "Siswati Home Language", "Setswana Home Language", "isiZulu Home Language", "isiXhosa Home Language", "isiNdebele Home Language", "Sepedi Home Language", "Xitsonga Home Language", "Tshivenda Home Language", "Mathematics", "Mathematical Literacy", "Life Orientation"];

    subjects.forEach(function(subject) {
        const option = document.createElement("option");
        option.value = subject;
        option.textContent = subject;
        select.appendChild(option);
    });

select.value = "Mathematics "; 
    subjectDiv.appendChild(select);

    const input = document.createElement("input");
    input.type = "number";
    input.classList.add("percentage-input");
    input.id = "percentage" + subjectCounter;
    input.min = "0";
    input.max = "100";
    input.placeholder = "%";
    input.style.width = "50px";

     input.value = "75";

    subjectDiv.appendChild(input);

    const deleteButton = document.createElement("button");
    deleteButton.classList.add("delete-button");
    deleteButton.textContent = "Delete";
    deleteButton.onclick = function() { deleteSubject(this); };
    subjectDiv.appendChild(deleteButton);

    subjectContainer.appendChild(subjectDiv);
    document.getElementById("subject-container").appendChild(subjectContainer);
}

// Function to delete a subject
function deleteSubject(button) {
    const subjectContainer = button.parentNode.parentNode;
    subjectContainer.remove();
    subjectCounter--;
}

subjectCounter = 0;

// Function to display eligible degrees based on user inputs
function displayEligibleDegrees() {
    // Get the selected subjects from the form
    const selectedSubjects = [];
    const subjectContainers = document.querySelectorAll('.subject-container');

    // Loop through the subject containers to get selected subjects
    subjectContainers.forEach(subjectContainer => {
        const subjectInput = subjectContainer.querySelector('.subject');
        if (subjectInput.value !== "") {
            selectedSubjects.push(subjectInput.value);
        }
    });

    // Get the percentages and APS from the form
    const percentageInputs = document.querySelectorAll('.percentage-input');
    const percentages = Array.from(percentageInputs).map(input => parseInt(input.value));

    const apsInput = document.getElementById('aps');
    const aps = parseInt(apsInput.value);

    // Initialize an array to store eligible degrees
    let eligibleDegrees = [];

    // Iterate through each degree in the UPData
    WitsData["University of Witwatersrand (Wits)"].forEach(degree => {
        // Flag to track if all subject requirements are met
        let allSubjectsMet = true;

        // Check if each subject requirement is met
        Object.keys(degree.requirements).forEach(subject => {
            if (subject === "APS") {
                if (aps < degree.requirements[subject]) {
                    allSubjectsMet = false;
                }
            } else {
                let subjectIndex = selectedSubjects.indexOf(subject);
                if (subjectIndex !== -1) {
                    let subjectLevel = calculateLevel(percentages[subjectIndex]);
                    if (subjectLevel < degree.requirements[subject]) {
                        allSubjectsMet = false;
                    }
                } else {
                    allSubjectsMet = false;
                }
            }
        });

        // If all subject requirements are met, add the degree to eligibleDegrees
        if (allSubjectsMet) {
            eligibleDegrees.push(degree.degree);
        }
    });

    // Display the eligible degrees on the screen
    let resultsDiv = document.getElementById('results');
    resultsDiv.innerHTML = "<h2>Eligible Degrees:</h2>";
    if (eligibleDegrees.length > 0) {
        let list = document.createElement('ul');
        eligibleDegrees.forEach(degree => {
            let listItem = document.createElement('li');
            listItem.textContent = degree;
            list.appendChild(listItem);
        });
        resultsDiv.appendChild(list);
    } else {
        resultsDiv.innerHTML += "<p>No degrees found matching your criteria.</p>";
    }
}

// Function to calculate the level based on the percentage
function calculateLevel(percentage) {
    if (percentage >= 80) return 7;
    else if (percentage >= 70) return 6;
    else if (percentage >= 60) return 5;
    else if (percentage >= 50) return 4;
    else if (percentage >= 40) return 3;
    else if (percentage >= 30) return 2;
    else return 1;
}