const UPData = {
  "University of Pretoria (UP)": [
    {
      degree: "Bachelor of Commerce in Accounting Sciences",
      requirements: { Mathematics: 5, "English Home Language": 5, APS: 34 },
      websiteURL: "https://www.up.ac.za/programmes/programme/07130044/year/2025"
    },
    {
      degree: "Bachelor of Commerce in Investment Management",
      requirements: { Mathematics: 6, "English Home Language": 5, APS: 34 },
      websiteURL: "https://www.up.ac.za/programmes/programme/07130205/year/2025"
    },
    {
      degree: "Bachelor of Commerce in Financial Management Sciences",
      requirements: { Mathematics: 5, "English Home Language": 5, APS: 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/07130206/year/2025"
    },
    
     {
      degree: "BIS Multimedia",
      requirements: { "English Home Language": 4 , "Mathemtics": 5 , "APS": 30 },
      websiteURL: "https://www.up.ac.za/programmes/programme/12131013/year/2025"
    },
    {
      degree: "Bachelor of Social Science Industrial Socology and Labour Studies ",
      requirements: { "English Home Language": 5 , "APS": 30 },
      websiteURL: "https://www.up.ac.za/programmes/programme/07130152/year/2025"
    },
    {
      degree: "Bachelor of Socail Science Heritage and Culutral Sciences",
      requirements: { "English Home Language": 5 , "APS": 30 },
      websiteURL: "https://www.up.ac.za/programmes/programme/07130152/year/2025"
    },
    {
      degree: "Bachelor of Arts in Information Design ",
      requirements: { "English Home Language": 5 , "APS": 30 },
      websiteURL: "https://www.up.ac.za/programmes/programme/01130102/year/2025"
    },
    {
      degree: "Bachelor of Socail Work ",
      requirements: { "English Home Language": 5 , "APS": 30 },
      websiteURL: "https://www.up.ac.za/programmes/programme/01130144/year/2025"
    },
    {
      degree: "Bachelor of Arts in Fine Arts ",
      requirements: { "English Home Language": 5 , "APS": 30 },
      websiteURL: "https://www.up.ac.za/programmes/programme/01130103/year/2025"
    },
    {
      degree: "Bachelor of Political Science Politcal Studies ",
      requirements: { "English Home Language": 5 , "APS": 30 },
      websiteURL: "https://www.up.ac.za/programmes/programme/01130039/year/2025"
    },
    {
      degree: "Bachelor of Arts Law",
      requirements: { "English Home Language": 5 , "APS": 34 },
      websiteURL: "https://www.up.ac.za/programmes/programme/01130086/year/2025"
    },

   
    {
      degree: "Bachelor of Veteinary Nursing",
      requirements: { "English Home Language": 4 , "Mathematics": 4, "Physics": 4, "Life Science": 4, "APS": 28 },
      websiteURL: "https://www.up.ac.za/programmes/programme/08130006/year/2025"
    },
    {
      degree: "Bachelor of Science Meterology",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 34 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133313/year/2025"
    },
    {
      degree: "Bachelor of Science Mathematical Statitics",
      requirements: { "English Home Language": 5 , "Mathematics": 6, "APS": 34 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133274/year/2025"
    },
    {
      degree: "Bachelor of Applied Mathemtics",
      requirements: { "English Home Language": 5 , "Mathematics": 6, "APS": 34 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133253/year/2025"
    },
    {
      degree: "Bachelor of  Actuarial and Financial Mathematics",
      requirements: { "English Home Language": 5 , "Mathematics": 6, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133395/year/2025"
    },
    {
      degree: "Bachelor of Science Ecology",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133400/year/2025"
    },
    {
      degree: "Bachelor of Zoology",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133399/year/2025"
    },
    {
      degree: "Bachelor of Entomolgy",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133401/year/2025"
    },
    {
      degree: "Bachelor of Science Genetics",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133402/year/2025"
    },
    {
      degree: "Bachelor of Science Human Physioology",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133408/year/2025"
    },
    {
      degree: "Bachelor of Science Medical Scinces",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133407/year/2025"
    },
    {
      degree: "Bachelor of Science Mircobiology",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133404/year/2025"
    },
    {
      degree: "Bachelor of Plant Science",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133405/year/2025"
    },
    {
      degree: "Bachelor of Science Food Managemnt(Cullinary)",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133321/year/2025"
    },
    {
      degree: "Bachelor of Science Food Managemnt(Nurtion)",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133323/year/2025"
    },
    {
      degree: "Bachelor of Science Food Science",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133406/year/2025"
    },
    {
      degree: "Bachelor of Science Argiculture in Animal Science",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133421/year/2025"
    },
    {
      degree: "Bachelor of Science Argiculture in Plant pathology",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133424/year/2025"
    },
    {
      degree: "Bachelor of Science Argiculture in Applied Plant and soil sciences",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 32 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133423/year/2025"
    },
    {
      degree: "Bachelor of Science Chemistry",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 34 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02133173/year/2025"
    },
    {
      degree: "Bachelor of Science Physics",
      requirements: { "English Home Language": 5 , "Mathematics": 5, "Physics": 5, "APS": 34 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02130109/year/2025"
    },
    {
      degree: "Bachelor of Clinical Medical Practice ",
      requirements: { "English Home Language": 4, "Mathematics": 4, "Physics": 4, "APS": 28 },
      websiteURL: "https://www.up.ac.za/programmes/programme/10130012/year/2025"
    },
    {
      degree: "Bachelor of Consumer Science im Clothing and Retail",
      requirements: { "English Home Language": 5 , "Mathematics": 4, "APS": 28 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02130109/year/2025"
    },
    {
      degree: "Bachelor of Consumer Science Food Retail managment",
      requirements: { "English Home Language": 5 , "Mathematics": 4, "APS": 28 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02130108/year/2025"
    },
    {
      degree: "Bachelor of Consumer Science Hospitially managament",
      requirements: { "English Home Language": 5 , "Mathematics": 4, "APS": 28 },
      websiteURL: "https://www.up.ac.za/programmes/programme/02130109/year/2025"
    }
  ]
};




// Function to add a subject
function addSubject() {
    if (subjectCounter >= 6) {
        alert("You can only select up to 6 subjects.");
        return;
    }
    subjectCounter++;
    
    const subjectContainer = document.createElement("div");
    subjectContainer.classList.add("subject-wrapper");

    const subjectDiv = document.createElement("div");
    subjectDiv.classList.add("subject-container");

    const select = document.createElement("select");
    select.classList.add("subject");
    select.id = "subjects" + subjectCounter;
    const option = document.createElement("option");
    option.value = "";
    option.textContent = "Select a subject";
    select.appendChild(option);
    const subjects = ["Economics", "Physical Sciences", "Life Sciences", "Agricultural Sciences", "Business Studies","Computer Applications Technology", "Accounting", "History", "Geography", "Religious Studies", "English Home Language", "English First Additional Language", "Afrikaans Huistaal", "Afrikaans Eerste Additionele Taal", "Sesotho Home Language", "Siswati Home Language", "Setswana Home Language", "isiZulu Home Language", "isiXhosa Home Language", "isiNdebele Home Language", "Sepedi Home Language", "Xitsonga Home Language", "Tshivenda Home Language", "Mathematics", "Mathematical Literacy", "Life Orientation"];

    subjects.forEach(function(subject) {
        const option = document.createElement("option");
        option.value = subject;
        option.textContent = subject;
        select.appendChild(option);
    });

select.value = "Mathematics "; 
    subjectDiv.appendChild(select);

    const input = document.createElement("input");
    input.type = "number";
    input.classList.add("percentage-input");
    input.id = "percentage" + subjectCounter;
    input.min = "0";
    input.max = "100";
    input.placeholder = "%";
    input.style.width = "50px";

     input.value = "75";

    subjectDiv.appendChild(input);

    const deleteButton = document.createElement("button");
    deleteButton.classList.add("delete-button");
    deleteButton.textContent = "Delete";
    deleteButton.onclick = function() { deleteSubject(this); };
    subjectDiv.appendChild(deleteButton);

    subjectContainer.appendChild(subjectDiv);
    document.getElementById("subject-container").appendChild(subjectContainer);
}

// Function to delete a subject
function deleteSubject(button) {
    const subjectContainer = button.parentNode.parentNode;
    subjectContainer.remove();
    subjectCounter--;
}



subjectCounter = 0;

// Function to display eligible degrees based on user inputs
//let subjectCounter = 1;

// Function to add a subject
function addSubject() {
    if (subjectCounter >= 6) {
        alert("You can only select up to 6 subjects.");
        return;
    }
    subjectCounter++;
    
    const subjectContainer = document.createElement("div");
    subjectContainer.classList.add("subject-wrapper");

    const subjectDiv = document.createElement("div");
    subjectDiv.classList.add("subject-container");

    const select = document.createElement("select");
    select.classList.add("subject");
    select.id = "subjects" + subjectCounter;
    const option = document.createElement("option");
    option.value = "";
    option.textContent = "Select a subject";
    select.appendChild(option);
    const subjects = ["Economics", "Physical Sciences", "Life Sciences", "Agricultural Sciences", "Business Studies", "Accounting", "History", "Geography", "Religious Studies", "English Home Language", "English First Additional Language", "Afrikaans Huistaal", "Afrikaans Eerste Additionele Taal", "Sesotho Home Language", "Siswati Home Language", "Setswana Home Language", "isiZulu Home Language", "isiXhosa Home Language", "isiNdebele Home Language", "Sepedi Home Language", "Xitsonga Home Language", "Tshivenda Home Language", "Mathematics", "Mathematical Literacy", "Life Orientation"];

    subjects.forEach(function(subject) {
        const option = document.createElement("option");
        option.value = subject;
        option.textContent = subject;
        select.appendChild(option);
    });

select.value = "Mathematics "; 
    subjectDiv.appendChild(select);

    const input = document.createElement("input");
    input.type = "number";
    input.classList.add("percentage-input");
    input.id = "percentage" + subjectCounter;
    input.min = "0";
    input.max = "100";
    input.placeholder = "%";
    input.style.width = "50px";

     input.value = "75";

    subjectDiv.appendChild(input);

    const deleteButton = document.createElement("button");
    deleteButton.classList.add("delete-button");
    deleteButton.textContent = "Delete";
    deleteButton.onclick = function() { deleteSubject(this); };
    subjectDiv.appendChild(deleteButton);

    subjectContainer.appendChild(subjectDiv);
    document.getElementById("subject-container").appendChild(subjectContainer);
}

// Function to delete a subject
function deleteSubject(button) {
    const subjectContainer = button.parentNode.parentNode;
    subjectContainer.remove();
    subjectCounter--;
}

subjectCounter = 0;

// Function to display eligible degrees based on user inputs
function displayEligibleDegrees() {
    // Get the selected subjects from the form
    const selectedSubjects = [];
    const subjectContainers = document.querySelectorAll('.subject-container');

    // Loop through the subject containers to get selected subjects
    subjectContainers.forEach(subjectContainer => {
        const subjectInput = subjectContainer.querySelector('.subject');
        if (subjectInput.value !== "") {
            selectedSubjects.push(subjectInput.value);
        }
    });

    // Get the percentages and APS from the form
    const percentageInputs = document.querySelectorAll('.percentage-input');
    const percentages = Array.from(percentageInputs).map(input => parseInt(input.value));

    const apsInput = document.getElementById('aps');
    const aps = parseInt(apsInput.value);

    // Initialize an array to store eligible degrees
    let eligibleDegrees = [];

    // Iterate through each degree in the UPData
    UPData["University of Pretoria (UP)"].forEach(degree => {
        // Flag to track if all subject requirements are met
        let allSubjectsMet = true;

        // Check if each subject requirement is met
        Object.keys(degree.requirements).forEach(subject => {
            if (subject === "APS") {
                if (aps < degree.requirements[subject]) {
                    allSubjectsMet = false;
                }
            } else if (subject === "English Home Language" || subject === "English First Additional Language") {
                // Check if either English Home Language or English First Additional Language meets the requirement
                let englishSubjectIndex = selectedSubjects.indexOf("English Home Language");
                let additionalEnglishSubjectIndex = selectedSubjects.indexOf("English First Additional Language");
                if (englishSubjectIndex === -1 && additionalEnglishSubjectIndex === -1) {
                    allSubjectsMet = false;
                }
            } else {
                let subjectIndex = selectedSubjects.indexOf(subject);
                if (subjectIndex !== -1) {
                    let subjectLevel = calculateLevel(percentages[subjectIndex]);
                    if (subjectLevel < degree.requirements[subject]) {
                        allSubjectsMet = false;
                    }
                } else {
                    allSubjectsMet = false;
                }
            }
        });

        // If all subject requirements are met, add the degree to eligibleDegrees
        if (allSubjectsMet) {
            eligibleDegrees.push(degree);
        }
    });

    // Display the eligible degrees on the screen
    let resultsDiv = document.getElementById('results');
    resultsDiv.innerHTML = "<h2>Eligible Degrees:</h2>";
    if (eligibleDegrees.length > 0) {
        let list = document.createElement('ul');
        eligibleDegrees.forEach(degree => {
            let listItem = document.createElement('li');
            let link = document.createElement('a');
            link.textContent = degree.degree;
            link.href = degree.websiteURL; // Set the href to the website URL
            link.target = "_blank"; // Open the link in a new tab
            listItem.appendChild(link);
            list.appendChild(listItem);
        });
        resultsDiv.appendChild(list);
    } else {
        resultsDiv.innerHTML += "<p>No degrees found matching your criteria.</p>";
    }
}

// Function to calculate the level based on the percentage
function calculateLevel(percentage) {
    if (percentage >= 80) return 7;
    else if (percentage >= 70) return 6;
    else if (percentage >= 60) return 5;
    else if (percentage >= 50) return 4;
    else if (percentage >= 40) return 3;
    else if (percentage >= 30) return 2;
    else return 1;
}
